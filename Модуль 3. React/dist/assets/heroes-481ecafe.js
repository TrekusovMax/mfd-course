import{a as e,j as g,L as N,r as s}from"./index-e3ceca35.js";import{u as v,S as w,B as k}from"./useSort-a3e34a84.js";import{u as j}from"./useData-a1d26a1c.js";const b=({heroes:o,lastNodeRef:d})=>{const{id:m,image:a,name:n,species:u}=o;return e("div",{ref:d,className:"w-full max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700",children:g("div",{className:"flex my-5 flex-col items-center",children:[e("img",{className:"w-24 h-24 mb-3 rounded-full shadow-lg",src:`${a}`,alt:`${n}`}),e("h5",{className:"mb-1 text-xl font-medium text-gray-900 dark:text-white",children:n}),e("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:u}),e("div",{className:"flex mt-4 space-x-3 md:mt-6",children:e(N,{to:`/heroes/${m}`,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Подробнее"})})]})})},F=()=>{const o="https://rickandmortyapi.com/api/character",[d,m]=s.useState(1),{loading:a,hasMore:n,error:u,data:c}=j(o,d),[l,x]=s.useState(c);s.useEffect(()=>{x(c)},[c]);const i=s.useRef(),f=s.useRef(),p=s.useCallback(r=>{a||(i.current&&i.current.disconnect(),i.current=new IntersectionObserver(t=>{t[0].isIntersecting&&n&&!f.current&&m(h=>h+1)}),r&&i.current.observe(r))},[a,n]);return v(l),g("div",{children:[g("div",{className:"flex md:justify-center lg:justify-between sm:mx-5   flex-col md:flex-row sm:justify-center mx-5",children:[e(w,{label:"Поиск героя",onChange:({target:r})=>{const{value:t}=r;t===""?f.current=void 0:f.current=t;const h=c.filter(y=>y.name.toLowerCase().indexOf(t.toLowerCase())>=0);x(h)}}),e(k,{})]}),a&&e("h2",{children:"Загрузка..."}),u&&e("h1",{className:"text-red-700",children:"Произошла ошибка"}),l&&l.length?e("div",{className:"grid lg:grid-cols-4 justify-items-center md:grid-cols-2 my-4 gap-4 sm:grid-cols-1",children:l.map((r,t)=>l.length===t+1?e(b,{heroes:r,lastNodeRef:p},r.id):e(b,{heroes:r},r.id))}):e("p",{className:"mt-[200px] text-3xl",children:"Героев не найдено"})]})};export{F as default};
